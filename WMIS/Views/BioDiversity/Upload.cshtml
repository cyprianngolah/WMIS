@using Wmis.Extensions
@{
    ViewBag.Title = "Species Bulk Upload";
}

@section Styles {
    @Html.Raw(Styles.Render("~/bundles/datatablescss"))
}

@section Scripts {
    @Html.Raw(Scripts.Render("~/bundles/datatables"))
    @Html.Raw(Scripts.Render("~/bundles/components/base"))
    @Html.Raw(Scripts.Render("~/bundles/biodiversity/upload"))
}


<el-dialog title="Bulk Upload Species"
           v-model="showModal"
           width="30%"
           destroy-on-close
           :close-on-press-escape="false"
           :close-on-click-modal="false"
           >
    <iframe id="uploadIframe" name="uploadIframe" src="" style="height: 1px; width: 1px;" frameborder="0" scrolling="no" height="1" width="1"></iframe>
    <form role="form" ref="uploadSpeciesForm" id="speciesFileUploadForm" enctype="multipart/form-data" action="~/api/biodiversity/upload/" method="post" target="uploadIframe">
        <div class="row g-2">
            <div class="col-12 font-weight-bold">Bulk Upload Species Template File</div>
            <div class="col-12">
                <input type="file" id="fileUpload" name="fileUpload">
                <p class="help-block mt-2">Only .xls and .xlsx files are supported. Please use the provided template (downloading a new version is recommended)</p>
            </div>
        </div>
        <div class="d-flex justify-content-end">
            <span class="dialog-footer">
                <el-button v-on:click="showModal = false">Cancel</el-button>
                <el-button type="primary" native-type="button" v-on:click="uploadObservationFile()">Confirm</el-button>
            </span>
        </div>
</form>
</el-dialog>

<div class="row h4 mb-4">
    <div class="col-md-12 d-flex justify-content-between">
        <span>
            <a href="~/Content/Files/BiodiversityBulkUploadTemplate.xlsx" target="_blank" type="button" class="btn btn-success btn-sm me-3">Download Upload Template</a>
            <button type="button" id="downloadSelectedButton" class="btn btn-primary btn-sm" v-bind:class="{'disabled' : !isSelected}" v-on:click="downloadSelectedFile()">Download Selected File</button>
        </span>

        <button type="button" class="btn btn-success btn-sm" v-on:click="showModal=true">Bulk Upload Species</button>
    </div>
</div>




<div class="row">
    <div class="col-md-12">
        <table id="bulkUploadTable" class="table table-sm w-100">
            <thead>
                <tr>
                    <th>Uploaded File</th>
                    <th>Upload Type</th>
                    <th>Date Created</th>
                </tr>
            </thead>
        </table>
    </div>
</div>